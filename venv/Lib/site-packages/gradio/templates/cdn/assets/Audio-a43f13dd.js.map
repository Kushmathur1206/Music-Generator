{"version":3,"file":"Audio-a43f13dd.js","sources":["../../../../js/icons/src/Music.svelte","../../../../js/audio/shared/utils.ts","../../../../js/audio/shared/Audio.svelte"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-music\"\n>\n\t<path d=\"M9 18V5l12-2v13\" />\n\t<circle cx=\"6\" cy=\"18\" r=\"3\" />\n\t<circle cx=\"18\" cy=\"16\" r=\"3\" />\n</svg>\n","import type { ActionReturn } from \"svelte/action\";\n\nexport interface LoadedParams {\n\tcrop_values?: [number, number];\n\tautoplay?: boolean;\n}\n\nexport function loaded(\n\tnode: HTMLAudioElement,\n\t{ crop_values, autoplay }: LoadedParams = {}\n): ActionReturn {\n\tfunction clamp_playback(): void {\n\t\tif (crop_values === undefined) return;\n\n\t\tconst start_time = (crop_values[0] / 100) * node.duration;\n\t\tconst end_time = (crop_values[1] / 100) * node.duration;\n\n\t\tif (node.currentTime < start_time) {\n\t\t\tnode.currentTime = start_time;\n\t\t}\n\n\t\tif (node.currentTime > end_time) {\n\t\t\tnode.currentTime = start_time;\n\t\t\tnode.pause();\n\t\t}\n\t}\n\n\tasync function handle_playback(): Promise<void> {\n\t\tif (!autoplay) return;\n\n\t\tnode.pause();\n\t\tawait node.play();\n\t}\n\n\tnode.addEventListener(\"loadeddata\", handle_playback);\n\tnode.addEventListener(\"timeupdate\", clamp_playback);\n\n\treturn {\n\t\tdestroy(): void {\n\t\t\tnode.removeEventListener(\"loadeddata\", handle_playback);\n\t\t\tnode.removeEventListener(\"timeupdate\", clamp_playback);\n\t\t}\n\t};\n}\n","<script lang=\"ts\">\n\timport type { HTMLAudioAttributes } from \"svelte/elements\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport { loaded, type LoadedParams } from \"../shared/utils\";\n\timport { resolve_wasm_src } from \"@gradio/wasm/svelte\";\n\n\texport let src: HTMLAudioAttributes[\"src\"] = undefined;\n\n\texport let autoplay: LoadedParams[\"autoplay\"] = undefined;\n\texport let crop_values: LoadedParams[\"crop_values\"] = undefined;\n\texport let controls: HTMLAudioAttributes[\"controls\"] = undefined;\n\texport let preload: HTMLAudioAttributes[\"preload\"] = undefined;\n\n\texport let node: HTMLAudioElement | undefined = undefined;\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n{#await resolve_wasm_src(src) then resolved_src}\n\t<audio\n\t\tsrc={resolved_src}\n\t\t{controls}\n\t\t{preload}\n\t\ton:play={dispatch.bind(null, \"play\")}\n\t\ton:pause={dispatch.bind(null, \"pause\")}\n\t\ton:ended={dispatch.bind(null, \"ended\")}\n\t\tbind:this={node}\n\t\tuse:loaded={{ autoplay, crop_values }}\n\t\tdata-testid={$$props[\"data-testid\"]}\n\t/>\n{:catch error}\n\t<p style=\"color: red;\">{error.message}</p>\n{/await}\n\n<style>\n\taudio {\n\t\tpadding: var(--size-2);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-14);\n\t}\n</style>\n"],"names":["insert","target","svg","anchor","append","path","circle0","circle1","loaded","node","crop_values","autoplay","clamp_playback","start_time","end_time","handle_playback","t_value","ctx","p","dirty","set_data","t","attr","audio","audio_src_value","audio_data_testid_value","listen","handle_promise","promise","resolve_wasm_src","info","src","$$props","controls","preload","dispatch","createEventDispatcher","$$value"],"mappings":"6tBAAAA,EAeKC,EAAAC,EAAAC,CAAA,EAHJC,EAA2BF,EAAAG,CAAA,EAC3BD,EAA8BF,EAAAI,CAAA,EAC9BF,EAA+BF,EAAAK,CAAA,8FCPzB,SAASC,EACfC,EACA,CAAE,YAAAC,EAAa,SAAAC,CAAS,EAAkB,CAAA,EAC3B,CACf,SAASC,GAAuB,CAC/B,GAAIF,IAAgB,OAAW,OAE/B,MAAMG,EAAcH,EAAY,CAAC,EAAI,IAAOD,EAAK,SAC3CK,EAAYJ,EAAY,CAAC,EAAI,IAAOD,EAAK,SAE3CA,EAAK,YAAcI,IACtBJ,EAAK,YAAcI,GAGhBJ,EAAK,YAAcK,IACtBL,EAAK,YAAcI,EACnBJ,EAAK,MAAM,EAEb,CAEA,eAAeM,GAAiC,CAC1CJ,IAELF,EAAK,MAAM,EACX,MAAMA,EAAK,OACZ,CAEK,OAAAA,EAAA,iBAAiB,aAAcM,CAAe,EAC9CN,EAAA,iBAAiB,aAAcG,CAAc,EAE3C,CACN,SAAgB,CACVH,EAAA,oBAAoB,aAAcM,CAAe,EACjDN,EAAA,oBAAoB,aAAcG,CAAc,CACtD,CAAA,CAEF,qBCZyBI,EAAAC,MAAM,QAAO,2DAArCjB,EAAyCC,EAAAiB,EAAAf,CAAA,iBAAjBgB,EAAA,GAAAH,KAAAA,EAAAC,MAAM,QAAO,KAAAG,EAAAC,EAAAL,CAAA,kFAX/BC,EAAY,CAAA,CAAA,GAAAK,EAAAC,EAAA,MAAAC,CAAA,sCAQJF,EAAAC,EAAA,cAAAE,EAAAR,KAAQ,aAAa,CAAA,uCATnCjB,EAUCC,EAAAsB,EAAApB,CAAA,iBANSuB,EAAAH,EAAA,OAAAN,EAAS,CAAA,EAAA,KAAK,KAAM,MAAM,CAAA,EACzBS,EAAAH,EAAA,QAAAN,EAAS,CAAA,EAAA,KAAK,KAAM,OAAO,CAAA,EAC3BS,EAAAH,EAAA,QAAAN,EAAS,CAAA,EAAA,KAAK,KAAM,OAAO,CAAA,qBAEvB,SAAAA,EAAQ,CAAA,EAAE,YAAAA,EAAW,CAAA,oCAP9BA,EAAY,CAAA,CAAA,kEAQJE,EAAA,KAAAM,KAAAA,EAAAR,KAAQ,aAAa,mEADpB,SAAAA,EAAQ,CAAA,EAAE,YAAAA,EAAW,CAAA,2LAT7B,OAAAU,EAAAC,EAAAC,EAAiBZ,EAAG,CAAA,CAAA,EAAAa,CAAA,4HAApBX,EAAA,GAAAS,KAAAA,EAAAC,EAAiBZ,EAAG,CAAA,CAAA,IAAAU,EAAAC,EAAAE,CAAA,uFAZhB,GAAA,CAAA,IAAAC,EAAkC,MAAS,EAAAC,EAE3C,CAAA,SAAArB,EAAqC,MAAS,EAAAqB,EAC9C,CAAA,YAAAtB,EAA2C,MAAS,EAAAsB,EACpD,CAAA,SAAAC,EAA4C,MAAS,EAAAD,EACrD,CAAA,QAAAE,EAA0C,MAAS,EAAAF,EAEnD,CAAA,KAAAvB,EAAqC,MAAS,EAAAuB,EAEnD,MAAAG,EAAWC,6CAWL3B,EAAI4B"}